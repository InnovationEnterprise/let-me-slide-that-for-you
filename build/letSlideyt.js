(function(){function h(a,b,c){a.addEventListener?a.addEventListener(b,c,!0):a.attachEvent(b,c)}function g(a,b){if("undefined"===typeof a)return!1;try{a["innerText"in a?"innerText":"textContent"]=b}catch(c){a.setAttribute("innerText",b)}}videojs.Youtube=videojs.MediaTechController.extend({init:function(a,b,c){this.player_=a;this.featuresTimeupdateEvents=this.featuresProgressEvents=!1;this.featuresNativeTextTracks=this.featuresPlaybackRate=!0;videojs.MediaTechController.call(this,a,b,c);this.isIos=
/(iPad|iPhone|iPod)/g.test(navigator.userAgent);this.isAndroid=/(Android)/g.test(navigator.userAgent);this.playVideoIsAllowed=!(this.isIos||this.isAndroid);if(this.isIos||this.isAndroid)this.player_.options().autoplay=!1;if("undefined"!==typeof b.source)for(var d in b.source)b.source.hasOwnProperty(d)&&(a.options()[d]=b.source[d]);this.player_.options().playbackRates=[];this.userQuality=videojs.Youtube.convertQualityName(a.options().quality);this.playerEl_=a.el();this.playerEl_.className+=" vjs-youtube";
this.qualityButton=document.createElement("div");this.qualityButton.setAttribute("class","vjs-quality-button vjs-menu-button vjs-control");this.qualityButton.setAttribute("tabindex",0);b=document.createElement("div");b.setAttribute("class","vjs-control-content");this.qualityButton.appendChild(b);this.qualityTitle=document.createElement("span");this.qualityTitle.setAttribute("class","vjs-control-text");b.appendChild(this.qualityTitle);"undefined"!==a.options().quality&&g(this.qualityTitle,a.options().quality||
"auto");c=document.createElement("div");c.setAttribute("class","vjs-menu");b.appendChild(c);this.qualityMenuContent=document.createElement("ul");this.qualityMenuContent.setAttribute("class","vjs-menu-content");c.appendChild(this.qualityMenuContent);this.id_=this.player_.id()+"_youtube_api";this.el_=videojs.Component.prototype.createEl("iframe",{id:this.id_,className:"vjs-tech",scrolling:"no",marginWidth:0,marginHeight:0,frameBorder:0});this.el_.setAttribute("allowfullScreen","");this.playerEl_.insertBefore(this.el_,
this.playerEl_.firstChild);/MSIE (\d+\.\d+);/.test(navigator.userAgent)?this.addIframeBlocker(Number(RegExp.$1)):/(iPad|iPhone|iPod|Android)/g.test(navigator.userAgent)||(this.el_.className+=" onDesktop",this.addIframeBlocker());this.parseSrc(a.options().src);this.playOnReady=this.player_.options().autoplay&&this.playVideoIsAllowed;this.forceHTML5=!("undefined"!==typeof this.player_.options().forceHTML5&&!0!==this.player_.options().forceHTML5);this.updateIframeSrc();var e=this;a.ready(function(){if(e.player_.options().controls){var b=
e.playerEl_.querySelectorAll(".vjs-control-bar")[0];b&&b.appendChild(e.qualityButton)}e.playOnReady&&!e.player_.options().ytcontrols&&("undefined"!==typeof e.player_.loadingSpinner&&e.player_.loadingSpinner.show(),"undefined"!==typeof e.player_.bigPlayButton&&e.player_.bigPlayButton.hide());a.trigger("loadstart")});this.on("dispose",function(){this.ytplayer&&this.ytplayer.destroy();this.player_.options().ytcontrols||this.player_.off("waiting",this.bindedWaiting);this.playerEl_.querySelectorAll(".vjs-poster")[0].style.backgroundImage=
"none";this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_);this.qualityButton.parentNode&&this.qualityButton.parentNode.removeChild(this.qualityButton);"undefined"!==typeof this.player_.loadingSpinner&&this.player_.loadingSpinner.hide();"undefined"!==typeof this.player_.bigPlayButton&&this.player_.bigPlayButton.hide();this.iframeblocker&&this.playerEl_.removeChild(this.iframeblocker)})}});videojs.Youtube.prototype.loadThumbnailUrl=function(a,b){var c="https://img.youtube.com/vi/"+a+"/maxresdefault.jpg",
d="https://img.youtube.com/vi/"+a+"/0.jpg";try{var e=new Image;e.onload=function(){if("naturalHeight"in this){if(90>=this.naturalHeight||120>=this.naturalWidth){this.onerror();return}}else if(90>=this.height||120>=this.width){this.onerror();return}b(c)};e.onerror=function(){b(d)};e.src=c}catch(k){b(d)}};videojs.Youtube.prototype.updateIframeSrc=function(){var a="undefined"===typeof this.player_.options().ytfullScreenControls||this.player_.options().ytfullScreenControls?1:0,a={enablejsapi:1,iv_load_policy:3,
playerapiid:this.id(),disablekb:1,wmode:"transparent",controls:this.player_.options().ytcontrols?1:0,fs:a,html5:this.player_.options().forceHTML5?1:null,playsinline:this.player_.options().playsInline?1:0,showinfo:0,rel:0,autoplay:this.playOnReady?1:0,loop:this.player_.options().loop?1:0,list:this.playlistId,vq:this.userQuality,origin:window.location.protocol+"//"+window.location.host};"file:"!==window.location.protocol&&"app:"!==window.location.protocol||delete a.origin;for(var b in a)!a.hasOwnProperty(b)||
"undefined"!==typeof a[b]&&null!==a[b]||delete a[b];var c=this;this.videoId||this.playlistId?(this.el_.src="https://www.youtube.com/embed/"+(this.videoId||"videoseries")+"?"+videojs.Youtube.makeQueryString(a),this.player_.options().ytcontrols?this.player_.controls(!1):!this.videoId||"undefined"!==typeof this.player_.poster()&&0!==this.player_.poster().length||setTimeout(function(){c.loadThumbnailUrl(c.videoId,function(a){c.player_.poster(a)})},100),this.bindedWaiting=function(){c.onWaiting()},this.player_.on("waiting",
this.bindedWaiting),videojs.Youtube.apiReady?this.loadYoutube():(videojs.Youtube.loadingQueue.push(this),videojs.Youtube.apiLoading||(b=document.createElement("script"),b.onerror=function(a){c.onError(a)},b.src="https://www.youtube.com/iframe_api",a=document.getElementsByTagName("script")[0],a.parentNode.insertBefore(b,a),videojs.Youtube.apiLoading=!0))):(this.el_.src="about:blank",setTimeout(function(){c.triggerReady()},500))};videojs.Youtube.prototype.onWaiting=function(){"undefined"!==typeof this.player_.bigPlayButton&&
this.player_.bigPlayButton.hide()};videojs.Youtube.prototype.addIframeBlocker=function(a){this.iframeblocker=videojs.Component.prototype.createEl("div");this.iframeblocker.className="iframeblocker";this.iframeblocker.style.position="absolute";this.iframeblocker.style.left=0;this.iframeblocker.style.right=0;this.iframeblocker.style.top=0;this.iframeblocker.style.bottom=0;a&&9>a?this.iframeblocker.style.opacity=.01:this.iframeblocker.style.background="rgba(255, 255, 255, 0.01)";var b=this;h(this.iframeblocker,
"mousemove",function(a){b.player_.userActive()||b.player_.userActive(!0);a.stopPropagation();a.preventDefault()});h(this.iframeblocker,"click",function(){b.paused()?b.play():b.pause()});this.playerEl_.insertBefore(this.iframeblocker,this.el_.nextSibling)};videojs.Youtube.prototype.parseSrc=function(a){if(this.srcVal=a){var b=a.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);this.videoId=b&&11===b[2].length?b[2]:null;b=a.match(/[?&]list=([^#\&\?]+)/);null!==b&&1<b.length?this.playlistId=
b[1]:this.playlistId&&delete this.playlistId;b=a.match(/[?&]vq=([^#\&\?]+)/);null!==b&&1<b.length&&(this.userQuality=b[1],videojs.Youtube.appendQualityLabel(this.qualityTitle,this.userQuality))}};videojs.Youtube.prototype.src=function(a){if("undefined"!==typeof a){this.parseSrc(a);if("about:blank"===this.el_.src){this.updateIframeSrc();return}delete this.defaultQuality;if(null!==this.videoId){this.player_.options().autoplay&&this.playVideoIsAllowed?this.ytplayer.loadVideoById({videoId:this.videoId,
suggestedQuality:this.userQuality}):this.ytplayer.cueVideoById({videoId:this.videoId,suggestedQuality:this.userQuality});var b=this;this.loadThumbnailUrl(this.videoId,function(a){b.playerEl_.querySelectorAll(".vjs-poster")[0].style.backgroundImage="url("+a+")";b.player_.poster(a)})}}return this.srcVal};videojs.Youtube.prototype.load=function(){};videojs.Youtube.prototype.play=function(){null!==this.videoId&&(this.player_.options().ytcontrols||this.player_.trigger("waiting"),this.isReady_?(this.ytplayer.setVolume(100*
this.player_.volume()),0<this.volumeVal?this.ytplayer.unMute():this.ytplayer.mute(),this.playVideoIsAllowed&&this.ytplayer.playVideo()):this.playOnReady=!0)};videojs.Youtube.prototype.pause=function(){this.ytplayer&&this.ytplayer.pauseVideo()};videojs.Youtube.prototype.paused=function(){return this.ytplayer?this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING:!0};videojs.Youtube.prototype.currentTime=function(){return this.ytplayer&&this.ytplayer.getCurrentTime?this.ytplayer.getCurrentTime():
0};videojs.Youtube.prototype.setCurrentTime=function(a){this.lastState===YT.PlayerState.PAUSED&&(this.timeBeforeSeek=this.currentTime());this.ytplayer.seekTo(a,!0);this.player_.trigger("timeupdate");this.player_.trigger("seeking");this.isSeeking=!0;this.lastState===YT.PlayerState.PAUSED&&this.timeBeforeSeek!==a&&(this.checkSeekedInPauseInterval=setInterval(videojs.bind(this,function(){this.lastState===YT.PlayerState.PAUSED&&this.isSeeking?this.currentTime()!==this.timeBeforeSeek&&(this.player_.trigger("timeupdate"),
this.player_.trigger("seeked"),this.isSeeking=!1,clearInterval(this.checkSeekedInPauseInterval)):clearInterval(this.checkSeekedInPauseInterval)}),250))};videojs.Youtube.prototype.playbackRate=function(){return this.ytplayer&&this.ytplayer.getPlaybackRate?this.ytplayer.getPlaybackRate():1};videojs.Youtube.prototype.setPlaybackRate=function(a){if(this.ytplayer&&this.ytplayer.setPlaybackRate){this.ytplayer.setPlaybackRate(a);var b=this;setTimeout(function(){b.player_.trigger("ratechange")},100)}};videojs.Youtube.prototype.duration=
function(){return this.ytplayer&&this.ytplayer.getDuration?this.ytplayer.getDuration():0};videojs.Youtube.prototype.currentSrc=function(){return this.srcVal};videojs.Youtube.prototype.ended=function(){return this.ytplayer?this.lastState===YT.PlayerState.ENDED:!1};videojs.Youtube.prototype.volume=function(){this.ytplayer&&isNaN(this.volumeVal)&&(this.volumeVal=this.ytplayer.getVolume()/100,this.volumeVal=isNaN(this.volumeVal)?1:this.volumeVal,this.player_.volume(this.volumeVal));return this.volumeVal};
videojs.Youtube.prototype.setVolume=function(a){"undefined"!==typeof a&&a!==this.volumeVal&&(this.ytplayer.setVolume(100*a),this.volumeVal=a,this.player_.trigger("volumechange"))};videojs.Youtube.prototype.muted=function(){return this.mutedVal};videojs.Youtube.prototype.setMuted=function(a){a?(this.storedVolume=this.volumeVal,this.ytplayer.mute(),this.player_.volume(0)):(this.ytplayer.unMute(),this.player_.volume(this.storedVolume));this.mutedVal=a;this.player_.trigger("volumechange")};videojs.Youtube.prototype.buffered=
function(){if(this.ytplayer&&this.ytplayer.getVideoBytesLoaded){var a=this.ytplayer.getVideoBytesLoaded(),b=this.ytplayer.getVideoBytesTotal();if(!a||!b)return 0;var c=this.ytplayer.getDuration(),a=a/b*c,b=this.ytplayer.getVideoStartBytes()/b*c;return videojs.createTimeRange(b,b+a)}return videojs.createTimeRange(0,0)};videojs.Youtube.prototype.supportsfullScreen=function(){return"function"!==typeof this.el_.webkitEnterfullScreen||!/Android/.test(videojs.USER_AGENT)&&/Chrome|Mac OS X 10.5/.test(videojs.USER_AGENT)?
!1:!0};videojs.Youtube.isSupported=function(){return!0};videojs.Youtube.canPlaySource=function(a){return"video/youtube"===a.type};videojs.Youtube.canControlVolume=function(){return!0};videojs.Youtube.loadingQueue=[];videojs.Youtube.prototype.loadYoutube=function(){var a=this;this.ytplayer=new YT.Player(this.id_,{events:{onReady:function(b){b.target.vjsTech.onReady();a.player_.trigger("ratechange")},onStateChange:function(a){a.target.vjsTech.onStateChange(a.data)},onPlaybackQualityChange:function(a){a.target.vjsTech.onPlaybackQualityChange(a.data)},
onError:function(a){a.target.vjsTech.onError(a.data)}}});this.ytplayer.vjsTech=this};videojs.Youtube.makeQueryString=function(a){var b=["modestbranding=1"],c;for(c in a)a.hasOwnProperty(c)&&b.push(c+"="+a[c]);return b.join("&")};window.onYouTubeIframeAPIReady=function(){for(var a;a=videojs.Youtube.loadingQueue.shift();)a.loadYoutube();videojs.Youtube.loadingQueue=[];videojs.Youtube.apiReady=!0};videojs.Youtube.prototype.onReady=function(){this.isReady_=!0;this.triggerReady();this.player_.options().playbackRates=
this.ytplayer.getAvailablePlaybackRates();this.player_.controlBar.playbackRateMenuButton.update();this.player_.trigger("loadedmetadata");this.player_.trigger("durationchange");this.player_.trigger("timeupdate");"undefined"===typeof this.player_.loadingSpinner||this.isIos||this.isAndroid||this.player_.loadingSpinner.hide();this.player_.options().muted&&this.setMuted(!0);if(!this.videoId&&this.playlistId){this.videoId=this.ytplayer.getPlaylist()[0];var a=this;this.loadThumbnailUrl(this.videoId,function(b){a.player_.poster(b)})}this.playOnReady&&
(this.playOnReady=!1,this.play())};videojs.Youtube.prototype.updateCaptions=function(){this.ytplayer.loadModule("captions");this.ytplayer.loadModule("cc");var a=this.ytplayer.getOptions(),b=0<=a.indexOf("captions")?"captions":0<=a.indexOf("cc")?"cc":null;if(null!==b&&!this.tracked_&&(a=this.ytplayer.getOption(b,"tracklist"))&&0<a.length){for(var c=0;c<a.length;c++)this.addTextTrack("captions",a[c].displayName,a[c].languageCode);var d=this;this.textTracks().on("change",function(){for(var a=null,c=
0;c<this.length;c++)if("showing"===this[c].mode){a=this[c].language;break}null!==a?d.ytplayer.setOption(b,"track",{languageCode:a}):d.ytplayer.setOption(b,"track",{})});this.tracked_=!0}};videojs.Youtube.prototype.updateQualities=function(){function a(a){h(a,"click",function(){var a=this.getAttribute("data-val");c.ytplayer.setPlaybackQuality(a);c.userQuality=a;videojs.Youtube.appendQualityLabel(c.qualityTitle,a);(a=c.qualityMenuContent.querySelector(".vjs-selected"))&&videojs.Youtube.removeClass(a,
"vjs-selected");videojs.Youtube.addClass(this,"vjs-selected")})}var b=this.ytplayer.getAvailableQualityLevels(),c=this;0>b.indexOf(this.userQuality)&&videojs.Youtube.appendQualityLabel(c.qualityTitle,this.defaultQuality);if(0===b.length)this.qualityButton.style.display="none";else{for(this.qualityButton.style.display="";this.qualityMenuContent.hasChildNodes();)this.qualityMenuContent.removeChild(this.qualityMenuContent.lastChild);for(var d=0;d<b.length;++d){var e=document.createElement("li");e.setAttribute("class",
"vjs-menu-item");e.setAttribute("data-val",b[d]);videojs.Youtube.appendQualityLabel(e,b[d]);b[d]===this.quality&&videojs.Youtube.addClass(e,"vjs-selected");a(e);this.qualityMenuContent.appendChild(e)}}};videojs.Youtube.prototype.onStateChange=function(a){if(a!==this.lastState){switch(a){case -1:this.player_.trigger("durationchange");break;case YT.PlayerState.ENDED:var b=!0;this.playlistId&&!this.player_.options().loop&&(b=0===this.ytplayer.getPlaylistIndex());b&&(this.player_.options().ytcontrols||
(this.playerEl_.querySelectorAll(".vjs-poster")[0].style.display="block","undefined"!==typeof this.player_.bigPlayButton&&this.player_.bigPlayButton.show()),this.player_.trigger("pause"),this.player_.trigger("ended"));break;case YT.PlayerState.PLAYING:this.playerEl_.querySelectorAll(".vjs-poster")[0].style.display="none";this.playVideoIsAllowed=!0;this.updateQualities();this.updateCaptions();this.player_.trigger("timeupdate");this.player_.trigger("durationchange");this.player_.trigger("playing");
this.player_.trigger("play");this.isSeeking&&(this.player_.trigger("seeked"),this.isSeeking=!1);break;case YT.PlayerState.PAUSED:this.player_.trigger("pause");break;case YT.PlayerState.BUFFERING:this.player_.trigger("timeupdate"),this.player_.options().ytcontrols||this.player_.trigger("waiting")}this.lastState=a}};videojs.Youtube.convertQualityName=function(a){switch(a){case "144p":return"tiny";case "240p":return"small";case "360p":return"medium";case "480p":return"large";case "720p":return"hd720";
case "1080p":return"hd1080";case "1440p":return"hd1440";case "2160p":return"hd2160"}return"auto"};videojs.Youtube.parseQualityName=function(a){switch(a){case "tiny":return"144p";case "small":return"240p";case "medium":return"360p";case "large":return"480p";case "hd720":return"720p";case "hd1080":return"1080p";case "hd1440":return"1440p";case "hd2160":return"2160p"}return"auto"};videojs.Youtube.appendQualityLabel=function(a,b){g(a,videojs.Youtube.parseQualityName(b));var c=document.createElement("span");
c.setAttribute("class","vjs-hd-label");switch(b){case "hd720":case "hd1080":case "hd1440":g(c,"HD");a.appendChild(c);break;case "hd2160":g(c,"4K"),a.appendChild(c)}};videojs.Youtube.prototype.onPlaybackQualityChange=function(a){if("undefined"===typeof this.defaultQuality&&(this.defaultQuality=a,"undefined"!==typeof this.userQuality))return;this.quality=a;videojs.Youtube.appendQualityLabel(this.qualityTitle,a);switch(a){case "medium":this.player_.videoWidth=480;this.player_.videoHeight=360;break;case "large":this.player_.videoWidth=
640;this.player_.videoHeight=480;break;case "hd720":this.player_.videoWidth=960;this.player_.videoHeight=720;break;case "hd1080":this.player_.videoWidth=1440;this.player_.videoHeight=1080;break;case "highres":this.player_.videoWidth=1920;this.player_.videoHeight=1080;break;case "small":this.player_.videoWidth=320;this.player_.videoHeight=240;break;case "tiny":this.player_.videoWidth=144;this.player_.videoHeight=108;break;default:this.player_.videoWidth=0,this.player_.videoHeight=0}this.player_.trigger("ratechange")};
videojs.Youtube.prototype.onError=function(a){this.player_.error(a)};videojs.Youtube.addClass=function(a,b){-1===(" "+a.className+" ").indexOf(" "+b+" ")&&(a.className=""===a.className?b:a.className+" "+b)};videojs.Youtube.removeClass=function(a,b){var c,d;if(-1!==a.className.indexOf(b)){c=a.className.split(" ");for(d=c.length-1;0<=d;d--)c[d]===b&&c.splice(d,1);a.className=c.join(" ")}};var f=document.createElement("style");f.setAttribute("type","text/css");document.getElementsByTagName("head")[0].appendChild(f);
f.styleSheet?f.styleSheet.cssText=" .vjs-youtube .vjs-poster { background-size: 100%!important; }.vjs-youtube .vjs-poster, .vjs-youtube .vjs-loading-spinner, .vjs-youtube .vjs-big-play-button, .vjs-youtube .vjs-text-track-display{ pointer-events: none !important; }.vjs-youtube.vjs-user-active .iframeblocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-tech.onDesktop { pointer-events: none; }.vjs-quality-button > div:first-child > span:first-child { position:relative;top:7px }":f.appendChild(document.createTextNode(" .vjs-youtube .vjs-poster { background-size: 100%!important; }.vjs-youtube .vjs-poster, .vjs-youtube .vjs-loading-spinner, .vjs-youtube .vjs-big-play-button, .vjs-youtube .vjs-text-track-display{ pointer-events: none !important; }.vjs-youtube.vjs-user-active .iframeblocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-tech.onDesktop { pointer-events: none; }.vjs-quality-button > div:first-child > span:first-child { position:relative;top:7px }"));
Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c=this.length>>>0,d=Number(b)||0,d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=c);d<c;d++)if(d in this&&this[d]===a)return d;return-1})})();
