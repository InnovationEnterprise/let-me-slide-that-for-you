(function(window,document,vjs,undefined){var extend=function(obj){var arg,i,k;for(i=1;i<arguments.length;i++){arg=arguments[i];for(k in arg)if(arg.hasOwnProperty(k))obj[k]=arg[k]}return obj},on=function(obj,events,handler){var type=Object.prototype.toString.call(events),register=function(obj,event,handler){if(obj.addEventListener)obj.addEventListener(event,handler);else if(obj.on)obj.on(event,handler);else if(obj.attachEvent)obj.attachEvent("on"+event,handler);else throw new Error("object has no mechanism for adding event listeners");
},i,ii;switch(type){case "[object String]":register(obj,events,handler);break;case "[object Array]":for(i=0,ii=events.length;i<ii;i++)register(obj,events[i],handler);break;case "[object Object]":for(i in events)if(events.hasOwnProperty(i))register(obj,i,events[i]);break;default:throw new Error("Unrecognized events parameter type: "+type);}return obj},setImmediate=function(callback){return(window.setImmediate||window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||
window.setTimeout)(callback,0)},clearImmediate=function(id){return(window.clearImmediate||window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.clearTimeout)(id)},cancelContentPlay=function(player){if(player.ads.cancelPlayTimeout)return;player.ads.cancelPlayTimeout=setImmediate(function(){player.ads.cancelPlayTimeout=null;if(!player.paused())player.pause();player.one("contentplayback",function(){if(player.paused())player.play()})})},getPlayerSnapshot=
function(player){var tech=player.el().querySelector(".vjs-tech"),tracks=player.remoteTextTracks?player.remoteTextTracks():[],track,i,suppressedTracks=[],snapshot={ended:player.ended(),src:player.currentSrc(),currentTime:player.currentTime(),type:player.currentType()};if(tech){snapshot.nativePoster=tech.poster;snapshot.style=tech.getAttribute("style")}i=tracks.length;while(i--){track=tracks[i];suppressedTracks.push({track:track,mode:track.mode});track.mode="disabled"}snapshot.suppressedTracks=suppressedTracks;
return snapshot},removeClass=function(element,className){var classes=element.className.split(/\s+/),i=classes.length,newClasses=[];while(i--)if(classes[i]!==className)newClasses.push(classes[i]);element.className=newClasses.join(" ")},restorePlayerSnapshot=function(player,snapshot){var tech=player.el().querySelector(".vjs-tech"),attempts=20,suppressedTracks=snapshot.suppressedTracks,trackSnapshot,restoreTracks=function(){var i=suppressedTracks.length;while(i--){trackSnapshot=suppressedTracks[i];trackSnapshot.track.mode=
trackSnapshot.mode}},resume=function(){var ended=false,updateEnded=function(){ended=true};player.currentTime(snapshot.currentTime);if(!snapshot.ended)player.play();else{window.setTimeout(function(){if(!ended)player.play();player.off("ended",updateEnded)},250);player.on("ended",updateEnded)}},tryToResume=function(){if(tech.readyState>1)return resume();if(tech.seekable===undefined)return resume();if(tech.seekable.length>0)return resume();if(attempts--)setTimeout(tryToResume,50);else(function(){try{resume()}catch(e){videojs.log.warn("Failed to resume the content after an advertisement",
e)}})()},srcChanged;if(snapshot.nativePoster)tech.poster=snapshot.nativePoster;if("style"in snapshot)tech.setAttribute("style",snapshot.style||"");if(player.src())srcChanged=player.src()!==snapshot.src;else srcChanged=player.currentSrc()!==snapshot.src;if(srcChanged){player.one("contentloadedmetadata",restoreTracks);player.src({src:snapshot.src,type:snapshot.type});player.load();player.one("contentcanplay",tryToResume)}else if(!player.ended()||!snapshot.ended){restoreTracks();player.play()}},removeNativePoster=
function(player){var tech=player.el().querySelector(".vjs-tech");if(tech)tech.removeAttribute("poster")},defaults={timeout:5E3,prerollTimeout:100,postrollTimeout:100,debug:false},adFramework=function(options){var player=this,settings=extend({},defaults,options||{}),fsmHandler;(function(){var videoEvents=videojs.Html5.Events,i,returnTrue=function(){return true},triggerEvent=function(type,event){event.isImmediatePropagationStopped=returnTrue;event.cancelBubble=true;event.isPropagationStopped=returnTrue;
player.trigger({type:type+event.type,state:player.ads.state,originalEvent:event})},redispatch=function(event){if(player.ads.state==="ad-playback")triggerEvent("ad",event);else if(player.ads.state==="content-playback"&&event.type==="ended")triggerEvent("content",event);else if(player.ads.state==="content-resuming"){if(player.ads.snapshot)if(player.currentSrc()!==player.ads.snapshot.src){if(event.type==="loadstart")return;return triggerEvent("content",event)}else if(player.ads.snapshot.ended){if(event.type===
"pause"||event.type==="ended"){player.addClass("vjs-has-started");return}return triggerEvent("content",event)}if(event.type!=="playing")triggerEvent("content",event)}};videoEvents.push("firstplay");videoEvents.push("loadedalldata");i=videoEvents.length;while(i--)player.on(videoEvents[i],redispatch);return redispatch})();player.on(["addurationchange","adcanplay"],function(){var snapshot=player.ads.snapshot;if(player.currentSrc()===snapshot.src)return;player.play()});player.ads={state:"content-set",
startLinearAdMode:function(){if(player.ads.state!=="ad-playback")player.trigger("adstart")},endLinearAdMode:function(){if(player.ads.state==="ad-playback")player.trigger("adend")},skipLinearAdMode:function(){if(player.ads.state!=="ad-playback")player.trigger("adskip")}};fsmHandler=function(event){var fsm={"content-set":{events:{"adscanceled":function(){this.state="content-playback"},"adsready":function(){this.state="ads-ready"},"play":function(){this.state="ads-ready?";cancelContentPlay(player);removeNativePoster(player)},
"adserror":function(){this.state="content-playback"},"adskip":function(){this.state="content-playback"}}},"ads-ready":{events:{"play":function(){this.state="preroll?";cancelContentPlay(player)},"adskip":function(){this.state="content-playback"},"adserror":function(){this.state="content-playback"}}},"preroll?":{enter:function(){player.el().className+=" vjs-ad-loading";player.ads.timeout=window.setTimeout(function(){player.trigger("adtimeout")},settings.prerollTimeout);player.trigger("readyforpreroll")},
leave:function(){window.clearTimeout(player.ads.timeout);removeClass(player.el(),"vjs-ad-loading")},events:{"play":function(){cancelContentPlay(player)},"adstart":function(){this.state="ad-playback"},"adskip":function(){this.state="content-playback"},"adtimeout":function(){this.state="content-playback"},"adserror":function(){this.state="content-playback"}}},"ads-ready?":{enter:function(){player.el().className+=" vjs-ad-loading";player.ads.timeout=window.setTimeout(function(){player.trigger("adtimeout")},
settings.timeout)},leave:function(){window.clearTimeout(player.ads.timeout);removeClass(player.el(),"vjs-ad-loading")},events:{"play":function(){cancelContentPlay(player)},"adscanceled":function(){this.state="content-playback"},"adsready":function(){this.state="preroll?"},"adskip":function(){this.state="content-playback"},"adtimeout":function(){this.state="content-playback"},"adserror":function(){this.state="content-playback"}}},"ad-playback":{enter:function(){this.snapshot=getPlayerSnapshot(player);
player.el().className+=" vjs-ad-playing";removeNativePoster(player);if(player.ads.cancelPlayTimeout){clearImmediate(player.ads.cancelPlayTimeout);player.ads.cancelPlayTimeout=null}},leave:function(){removeClass(player.el(),"vjs-ad-playing");restorePlayerSnapshot(player,this.snapshot);if(player.ads.triggerevent!=="adend")player.trigger("adend")},events:{"adend":function(){this.state="content-resuming"},"adserror":function(){this.state="content-resuming"}}},"content-resuming":{enter:function(){if(this.snapshot.ended){window.clearTimeout(player.ads._fireEndedTimeout);
player.ads._fireEndedTimeout=window.setTimeout(function(){player.trigger("ended")},1E3)}},leave:function(){window.clearTimeout(player.ads._fireEndedTimeout)},events:{"contentupdate":function(){this.state="content-set"},"playing":function(){this.state="content-playback"},"ended":function(){this.state="content-playback"}}},"postroll?":{enter:function(){this.snapshot=getPlayerSnapshot(player);player.el().className+=" vjs-ad-loading";player.ads.timeout=window.setTimeout(function(){player.trigger("adtimeout")},
settings.postrollTimeout)},leave:function(){window.clearTimeout(player.ads.timeout);removeClass(player.el(),"vjs-ad-loading")},events:{"adstart":function(){this.state="ad-playback"},"adskip":function(){this.state="content-resuming";setImmediate(function(){player.trigger("ended")})},"adtimeout":function(){this.state="content-resuming";setImmediate(function(){player.trigger("ended")})},"adserror":function(){this.state="content-resuming";setImmediate(function(){player.trigger("ended")})}}},"content-playback":{enter:function(){if(player.ads.cancelPlayTimeout){clearImmediate(player.ads.cancelPlayTimeout);
player.ads.cancelPlayTimeout=null}player.trigger({type:"contentplayback",triggerevent:player.ads.triggerevent})},events:{"adsready":function(){player.trigger("readyforpreroll")},"adstart":function(){this.state="ad-playback"},"contentupdate":function(){if(player.paused())this.state="content-set";else this.state="ads-ready?"},"contentended":function(){this.state="postroll?"}}}};(function(state){var noop=function(){};((fsm[state].events||{})[event.type]||noop).apply(player.ads);if(state!==player.ads.state){player.ads.triggerevent=
event.type;(fsm[state].leave||noop).apply(player.ads);(fsm[player.ads.state].enter||noop).apply(player.ads);if(settings.debug)videojs.log("ads",player.ads.triggerevent+" triggered: "+state+" -> "+player.ads.state)}})(player.ads.state)};on(player,vjs.Html5.Events.concat(["adtimeout","contentupdate","contentplaying","contentended","adsready","adserror","adscanceled","adstart","adend","adskip"]),fsmHandler);player.ads.contentSrc=player.currentSrc();(function(){var checkSrc=function(){var src;if(player.ads.state!==
"ad-playback"){src=player.currentSrc();if(src!==player.ads.contentSrc){player.trigger({type:"contentupdate",oldValue:player.ads.contentSrc,newValue:src});player.ads.contentSrc=src}}};player.on(["loadstart"],checkSrc);setImmediate(checkSrc)})();if(!player.paused())fsmHandler({type:"play"})};vjs.plugin("ads",adFramework)})(window,document,videojs);
(function(vjs){var extend=function(obj){var arg;var index;var key;for(index=1;index<arguments.length;index++){arg=arguments[index];for(key in arg)if(arg.hasOwnProperty(key))obj[key]=arg[key]}return obj},ima_defaults={debug:false,timeout:5E3,prerollTimeout:100},imaPlugin=function(options,readyCallback){var player=this;player.ima.createAdContainer_=function(){vjsControls=player.getChild("controlBar");adContainerDiv=vjsControls.el().parentNode.insertBefore(document.createElement("div"),vjsControls.el());
adContainerDiv.id="ima-ad-container";adContainerDiv.style.width=player.width()+"px";adContainerDiv.style.height=player.height()+"px";adContainerDiv.addEventListener("mouseover",player.ima.showAdControls_,false);adContainerDiv.addEventListener("mouseout",player.ima.hideAdControls_,false);player.ima.createControls_();adDisplayContainer=new google.ima.AdDisplayContainer(adContainerDiv,contentPlayer)};player.ima.createControls_=function(){controlsDiv=document.createElement("div");controlsDiv.id="ima-controls-div";
controlsDiv.style.width="100%";countdownDiv=document.createElement("div");countdownDiv.id="ima-countdown-div";countdownDiv.innerHTML="Advertisement";countdownDiv.style.display=showCountdown?"block":"none";seekBarDiv=document.createElement("div");seekBarDiv.id="ima-seek-bar-div";seekBarDiv.style.width=player.width()+"px";progressDiv=document.createElement("div");progressDiv.id="ima-progress-div";playPauseDiv=document.createElement("div");playPauseDiv.id="ima-play-pause-div";playPauseDiv.className=
"ima-playing";playPauseDiv.addEventListener("click",player.ima.onAdPlayPauseClick_,false);muteDiv=document.createElement("div");muteDiv.id="ima-mute-div";muteDiv.className="ima-non-muted";muteDiv.addEventListener("click",player.ima.onAdMuteClick_,false);sliderDiv=document.createElement("div");sliderDiv.id="ima-slider-div";sliderDiv.addEventListener("mousedown",player.ima.onAdVolumeSliderMouseDown_,false);sliderLevelDiv=document.createElement("div");sliderLevelDiv.id="ima-slider-level-div";fullscreenDiv=
document.createElement("div");fullscreenDiv.id="ima-fullscreen-div";fullscreenDiv.className="ima-non-fullscreen";fullscreenDiv.addEventListener("click",player.ima.onAdFullscreenClick_,false);adContainerDiv.insertBefore(controlsDiv,adContainerDiv.childNodes[adContainerDiv.childNodes.length]);controlsDiv.insertBefore(countdownDiv,controlsDiv.childNodes[controlsDiv.childNodes.length]);controlsDiv.insertBefore(seekBarDiv,controlsDiv.childNodes[controlsDiv.childNodes.length]);controlsDiv.insertBefore(playPauseDiv,
controlsDiv.childNodes[controlsDiv.childNodes.length]);controlsDiv.insertBefore(muteDiv,controlsDiv.childNodes[controlsDiv.childNodes.length]);controlsDiv.insertBefore(sliderDiv,controlsDiv.childNodes[controlsDiv.childNodes.length]);controlsDiv.insertBefore(fullscreenDiv,controlsDiv.childNodes[controlsDiv.childNodes.length]);seekBarDiv.insertBefore(progressDiv,seekBarDiv.childNodes[controlsDiv.childNodes.length]);sliderDiv.insertBefore(sliderLevelDiv,sliderDiv.childNodes[sliderDiv.childNodes.length])};
player.ima.initializeAdDisplayContainer=function(){adDisplayContainerInitialized=true;adDisplayContainer.initialize()};player.ima.requestAds=function(){if(!adDisplayContainerInitialized)adDisplayContainer.initialize();var adsRequest=new google.ima.AdsRequest;adsRequest.adTagUrl=settings.adTagUrl;adsRequest.linearAdSlotWidth=player.width();adsRequest.linearAdSlotHeight=player.height();adsRequest.nonLinearAdSlotWidth=settings.nonLinearWidth||player.width();adsRequest.nonLinearAdSlotHeight=settings.nonLinearHeight||
player.height()/3;adsLoader.requestAds(adsRequest)};player.ima.onAdsManagerLoaded_=function(adsManagerLoadedEvent){adsManager=adsManagerLoadedEvent.getAdsManager(contentPlayheadTracker,adsRenderingSettings);adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,player.ima.onAdError_);adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,player.ima.onAdBreakReady_);adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,player.ima.onContentPauseRequested_);
adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,player.ima.onContentResumeRequested_);adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,player.ima.onAllAdsCompleted_);adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,player.ima.onAdLoaded_);adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,player.ima.onAdStarted_);adsManager.addEventListener(google.ima.AdEvent.Type.CLICK,player.ima.onAdPlayPauseClick_);adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,
player.ima.onAdComplete_);adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,player.ima.onAdComplete_);if(!autoPlayAdBreaks)try{adsManager.init(player.width(),player.height(),google.ima.ViewMode.NORMAL);adsManager.setVolume(player.muted()?0:player.volume())}catch(adError){player.ima.onAdError_(adError)}player.trigger("adsready")};player.ima.start=function(){if(autoPlayAdBreaks)try{adsManager.init(player.width(),player.height(),google.ima.ViewMode.NORMAL);adsManager.setVolume(player.muted()?
0:player.volume());adsManager.start()}catch(adError){player.ima.onAdError_(adError)}};player.ima.onAdsLoaderError_=function(event){window.console.log("AdsLoader error: "+event.getError());if(adsManager)adsManager.destroy();player.trigger("adserror")};player.ima.onAdError_=function(adErrorEvent){window.console.log("Ad error: "+adErrorEvent.getError());vjsControls.show();adsManager.destroy();adContainerDiv.style.display="none";player.trigger("adserror")};player.ima.onAdBreakReady_=function(adEvent){adBreakReadyListener(adEvent)};
player.ima.playAdBreak=function(){if(!autoPlayAdBreaks)adsManager.start()};player.ima.onContentPauseRequested_=function(adEvent){adsActive=true;adPlaying=true;player.off("ended",localContentEndedListener);if(adEvent.getAd().getAdPodInfo().getPodIndex()!=-1)player.ads.startLinearAdMode();adContainerDiv.style.display="block";controlsDiv.style.display="block";vjsControls.hide();player.pause()};player.ima.onContentResumeRequested_=function(adEvent){adsActive=false;adPlaying=false;player.on("ended",localContentEndedListener);
if(currentAd&&currentAd.isLinear())adContainerDiv.style.display="none";vjsControls.show();if(!currentAd)player.ads.endLinearAdMode();else if(!contentComplete&&currentAd.getAdPodInfo().getPodIndex()!=-1)player.ads.endLinearAdMode();countdownDiv.innerHTML=""};player.ima.onAllAdsCompleted_=function(adEvent){allAdsCompleted=true;if(contentComplete==true)for(var index in contentAndAdsEndedListeners)contentAndAdsEndedListeners[index]()};player.ima.onAdLoaded_=function(adEvent){if(!adEvent.getAd().isLinear())player.play()};
player.ima.onAdStarted_=function(adEvent){currentAd=adEvent.getAd();if(currentAd.isLinear()){adTrackingTimer=setInterval(player.ima.onAdPlayheadTrackerInterval_,250);adContainerDiv.className=""}else adContainerDiv.className="bumpable-ima-ad-container"};player.ima.onAdComplete_=function(adEvent){if(currentAd.isLinear())clearInterval(adTrackingTimer)};player.ima.onAdPlayheadTrackerInterval_=function(){var remainingTime=adsManager.getRemainingTime();var duration=currentAd.getDuration();var currentTime=
duration-remainingTime;currentTime=currentTime>0?currentTime:0;var isPod=false;var adPosition,totalAds;if(currentAd.getAdPodInfo()){isPod=true;adPosition=currentAd.getAdPodInfo().getAdPosition();totalAds=currentAd.getAdPodInfo().getTotalAds()}var remainingMinutes=Math.floor(remainingTime/60);var remainingSeconds=Math.floor(remainingTime%60);if(remainingSeconds.toString().length<2)remainingSeconds="0"+remainingSeconds;var podCount=": ";if(isPod)podCount=" ("+adPosition+" of "+totalAds+"): ";countdownDiv.innerHTML=
"Advertisement"+podCount+remainingMinutes+":"+remainingSeconds;var playProgressRatio=currentTime/duration;var playProgressPercent=playProgressRatio*100;progressDiv.style.width=playProgressPercent+"%"};player.ima.hideAdControls_=function(){playPauseDiv.style.display="none";muteDiv.style.display="none";fullscreenDiv.style.display="none";controlsDiv.style.height="14px"};player.ima.showAdControls_=function(){controlsDiv.style.height="37px";playPauseDiv.style.display="block";muteDiv.style.display="block";
sliderDiv.style.display="block";fullscreenDiv.style.display="block"};player.ima.onAdPlayPauseClick_=function(){if(adPlaying){playPauseDiv.className="ima-paused";adsManager.pause();adPlaying=false}else{playPauseDiv.className="ima-playing";adsManager.resume();adPlaying=true}};player.ima.onAdMuteClick_=function(){if(adMuted){muteDiv.className="ima-non-muted";adsManager.setVolume(1);player.muted(false);adMuted=false;sliderLevelDiv.style.width=player.volume()*100+"%"}else{muteDiv.className="ima-muted";
adsManager.setVolume(0);player.muted(true);adMuted=true;sliderLevelDiv.style.width="0%"}};player.ima.onAdVolumeSliderMouseDown_=function(){document.addEventListener("mouseup",player.ima.onMouseUp_,false);document.addEventListener("mousemove",player.ima.onMouseMove_,false)};player.ima.onMouseMove_=function(event){player.ima.setVolumeSlider_(event)};player.ima.onMouseUp_=function(event){player.ima.setVolumeSlider_(event);document.removeEventListener("mousemove",player.ima.onMouseMove_);document.removeEventListener("mouseup",
player.ima.onMouseUp_)};player.ima.setVolumeSlider_=function(event){var percent=(event.clientX-sliderDiv.getBoundingClientRect().left)/sliderDiv.offsetWidth;percent*=100;percent=Math.min(Math.max(percent,0),100);sliderLevelDiv.style.width=percent+"%";player.volume(percent/100);adsManager.setVolume(percent/100);if(player.volume()==0){muteDiv.className="ima-muted";player.muted(true);adMuted=true}else{muteDiv.className="ima-non-muted";player.muted(false);adMuted=false}};player.ima.onAdFullscreenClick_=
function(){if(player.isFullscreen())player.exitFullscreen();else player.requestFullscreen()};player.ima.onFullscreenChange_=function(){if(player.isFullscreen()){fullscreenDiv.className="ima-fullscreen";adContainerDiv.style.width=window.screen.width+"px";adContainerDiv.style.height=window.screen.height+"px";adsManager.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN)}else{fullscreenDiv.className="ima-non-fullscreen";adContainerDiv.style.width=player.width()+"px";adContainerDiv.style.height=
player.height()+"px";adsManager.resize(player.width(),player.height(),google.ima.ViewMode.NORMAL)}};player.ima.onVolumeChange_=function(){var newVolume=player.muted()?0:player.volume();if(adsManager)adsManager.setVolume(newVolume)};player.ima.seekContentToZero_=function(){player.off("loadedmetadata",player.ima.seekContentToZero_);player.currentTime(0)};player.ima.playContentFromZero_=function(){player.off("loadedmetadata",player.ima.playContentFromZero_);player.currentTime(0);player.play()};player.ima.resetIMA_=
function(){if(adsManager){adsManager.destroy();adsManager=null}if(adsLoader&&!contentComplete)adsLoader.contentComplete();contentComplete=false;allAdsCompleted=false};player.ima.addEventListener=function(event,callback){if(adsManager)adsManager.addEventListener(event,callback)};player.ima.getAdsManager=function(){return adsManager};player.ima.setContent=function(contentSrc,adTag,playOnLoad){player.ima.resetIMA_();settings.adTagUrl=adTag?adTag:settings.adTagUrl;if(!!player.currentSrc())player.pause();
if(contentSrc)player.src(contentSrc);if(playOnLoad)player.on("loadedmetadata",player.ima.playContentFromZero_);else player.on("loadedmetadata",player.ima.seekContentToZero_)};player.ima.addContentEndedListener=function(listener){contentEndedListeners.push(listener)};player.ima.addContentAndAdsEndedListener=function(listener){contentAndAdsEndedListeners.push(listener)};player.ima.setAdBreakReadyListener=function(listener){adBreakReadyListener=listener};player.ima.pauseAd=function(){if(adsActive&&adPlaying){playPauseDiv.className=
"ima-paused";adsManager.pause();adPlaying=false}};player.ima.resumeAd=function(){if(adsActive&&!adPlaying){playPauseDiv.className="ima-playing";adsManager.resume();adPlaying=true}};player.ima.setUpPlayerIntervals_=function(){updateTimeIntervalHandle=setInterval(player.ima.updateCurrentTime,seekCheckInterval);seekCheckIntervalHandle=setInterval(player.ima.checkForSeeking_,seekCheckInterval)};player.ima.updateCurrentTime=function(){if(!contentPlayheadTracker.seeking)contentPlayheadTracker.currentTime=
player.currentTime()};player.ima.checkForSeeking_=function(){var tempCurrentTime=player.currentTime();var diff=(tempCurrentTime-contentPlayheadTracker.previousTime)*1E3;if(Math.abs(diff)>seekCheckInterval+seekThreshold)contentPlayheadTracker.seeking=true;else contentPlayheadTracker.seeking=false;contentPlayheadTracker.previousTime=player.currentTime()};player.ima.setShowCountdown=function(showCountdownIn){showCountdown=showCountdownIn;countdownDiv.style.display=showCountdown?"block":"none"};var VERSION=
"0.2.0";var settings;var contentPlayer;var showCountdown;var autoPlayAdBreaks;var vjsControls;var adContainerDiv;var controlsDiv;var countdownDiv;var seekBarDiv;var progressDiv;var playPauseDiv;var muteDiv;var sliderDiv;var sliderLevelDiv;var fullscreenDiv;var adDisplayContainer;var adDisplayContainerInitialized=false;var adsLoader;var adsManager;var adsRenderingSettings=null;var adTagUrl;var currentAd;var contentTrackingTimer;var adTrackingTimer;var adsActive=false;var adPlaying=false;var adMuted=
false;var contentComplete=false;var allAdsCompleted=false;var updateTimeIntervalHandle;var seekCheckIntervalHandle;var seekCheckInterval=1E3;var seekThreshold=100;var contentPlayheadTracker={currentTime:0,previousTime:0,seeking:false,duration:0};var adPlayheadTracker={currentTime:0,duration:0,isPod:false,adPosition:0,totalAds:0};var contentEndedListeners=[];var contentAndAdsEndedListeners=[];var adBreakReadyListener=undefined;var localContentEndedListener=function(){if(adsLoader&&!contentComplete){adsLoader.contentComplete();
contentComplete=true}for(var index in contentEndedListeners)contentEndedListeners[index]();if(allAdsCompleted)for(var index in contentAndAdsEndedListeners)contentAndAdsEndedListeners[index]();clearInterval(updateTimeIntervalHandle);clearInterval(seekCheckIntervalHandle);player.one("play",player.ima.setUpPlayerIntervals_)};settings=extend({},ima_defaults,options||{});if(!settings["id"]){window.console.log("Error: must provide id of video.js div");return}contentPlayer=document.getElementById(settings["id"]+
"_html5_api");showCountdown=true;if(settings["showCountdown"]==false)showCountdown=false;autoPlayAdBreaks=true;if(settings["autoPlayAdBreaks"]==false)autoPlayAdBreaks=false;player.one("play",player.ima.setUpPlayerIntervals_);player.on("ended",localContentEndedListener);var contrib_ads_defaults={debug:settings.debug,timeout:settings.timeout,prerollTimeout:settings.prerollTimeout};var ads_plugin_settings=extend({},contrib_ads_defaults,options["contribAdsSettings"]||{});player.ads(ads_plugin_settings);
adsRenderingSettings=new google.ima.AdsRenderingSettings;adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=true;if(settings["adsRenderingSettings"])for(var setting in settings["adsRenderingSettings"])adsRenderingSettings[setting]=settings["adsRenderingSettings"][setting];if(settings["locale"])google.ima.settings.setLocale(settings["locale"]);player.ima.createAdContainer_();adsLoader=new google.ima.AdsLoader(adDisplayContainer);adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED);
if(settings.vpaidAllowed==false)adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED);if(settings.vpaidMode)adsLoader.getSettings().setVpaidMode(settings.vpaidMode);if(settings.locale)adsLoader.getSettings().setLocale(settings.locale);adsLoader.getSettings().setPlayerType("videojs-ima");adsLoader.getSettings().setPlayerVersion(VERSION);adsLoader.getSettings().setAutoPlayAdBreaks(autoPlayAdBreaks);adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,
player.ima.onAdsManagerLoaded_,false);adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,player.ima.onAdsLoaderError_,false);if(!readyCallback)readyCallback=player.ima.start;player.on("readyforpreroll",readyCallback);player.on("fullscreenchange",player.ima.onFullscreenChange_);player.on("volumechange",player.ima.onVolumeChange_)};vjs.plugin("ima",imaPlugin)})(window.videojs);
