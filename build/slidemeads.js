(function(e,t,n,r){"use strict";var i=function(e){var t,n,r;for(n=1;n<arguments.length;n++){t=arguments[n];for(r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}}return e},s=function(e,t,n){var r=Object.prototype.toString.call(t),i=function(e,t,n){if(e.addEventListener){e.addEventListener(t,n)}else if(e.on){e.on(t,n)}else if(e.attachEvent){e.attachEvent("on"+t,n)}else{throw new Error("object has no mechanism for adding event listeners")}},s,o;switch(r){case"[object String]":i(e,t,n);break;case"[object Array]":for(s=0,o=t.length;s<o;s++){i(e,t[s],n)}break;case"[object Object]":for(s in t){if(t.hasOwnProperty(s)){i(e,s,t[s])}}break;default:throw new Error("Unrecognized events parameter type: "+r)}return e},o=function(t){return(e.setImmediate||e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||e.setTimeout)(t,0)},u=function(t){return(e.clearImmediate||e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.mozCancelAnimationFrame||e.clearTimeout)(t)},a=function(e){if(e.ads.cancelPlayTimeout){return}e.ads.cancelPlayTimeout=o(function(){e.ads.cancelPlayTimeout=null;if(!e.paused()){e.pause()}})},f=function(e){var t=e.el().querySelector(".vjs-tech"),n={src:e.currentSrc(),currentTime:e.currentTime(),type:e.currentType()};if(t){n.nativePoster=t.poster;n.style=t.getAttribute("style")}return n},l=function(e,t){var n=e.className.split(/\s+/),r=n.length,i=[];while(r--){if(n[r]!==t){i.push(n[r])}}e.className=i.join(" ")},c=function(e,t){var n=e.el().querySelector(".vjs-tech"),i=20,s=function(){e.currentTime(t.currentTime);if(!e.ended()){e.play()}},o=function(){if(n.seekable===r){s();return}if(n.seekable.length>0){s();return}if(i--){setTimeout(o,50)}},u;if(t.nativePoster){n.poster=t.nativePoster}if("style"in t){n.setAttribute("style",t.style||"")}if(e.src()){u=e.src()!==t.src}else{u=e.currentSrc()!==t.src}if(u){e.src({src:t.src,type:t.type});e.load();e.one("loadedmetadata",o)}else if(!e.ended()){e.play()}},h=function(e){var t=e.el().querySelector(".vjs-tech");if(t){t.removeAttribute("poster")}},p={timeout:5e3,prerollTimeout:100,debug:false},d=function(t){var r=this,d=i({},p,t||{}),v;r.ads={state:"content-set",startLinearAdMode:function(){r.trigger("adstart")},endLinearAdMode:function(){r.trigger("adend")}};v=function(t){var n={"content-set":{events:{adscanceled:function(){this.state="content-playback"},adsready:function(){this.state="ads-ready"},play:function(){this.state="ads-ready?";a(r);h(r)}}},"ads-ready":{events:{play:function(){this.state="preroll?";a(r)}}},"preroll?":{enter:function(){r.el().className+=" vjs-ad-loading";r.ads.timeout=e.setTimeout(function(){r.trigger("adtimeout")},d.prerollTimeout);r.trigger("readyforpreroll")},leave:function(){e.clearTimeout(r.ads.timeout);u(r.ads.cancelPlayTimeout);r.ads.cancelPlayTimeout=null;l(r.el(),"vjs-ad-loading")},events:{play:function(){a(r)},adstart:function(){this.state="ad-playback";r.el().className+=" vjs-ad-playing"},adtimeout:function(){this.state="content-playback";r.play()}}},"ads-ready?":{enter:function(){r.el().className+=" vjs-ad-loading";r.ads.timeout=e.setTimeout(function(){r.trigger("adtimeout")},d.timeout)},leave:function(){e.clearTimeout(r.ads.timeout);l(r.el(),"vjs-ad-loading")},events:{play:function(){a(r)},adscanceled:function(){this.state="content-playback";u(r.ads.cancelPlayTimeout);r.ads.cancelPlayTimeout=null;r.play()},adsready:function(){this.state="preroll?"},adtimeout:function(){this.state="ad-timeout-playback"}}},"ad-timeout-playback":{events:{adsready:function(){if(r.paused()){this.state="ads-ready"}else{this.state="preroll?"}},contentupdate:function(){if(r.paused()){this.state="content-set"}else{this.state="ads-ready?"}}}},"ad-playback":{enter:function(){this.snapshot=f(r);h(r)},leave:function(){l(r.el(),"vjs-ad-playing");c(r,this.snapshot)},events:{adend:function(){this.state="content-playback"}}},"content-playback":{events:{adstart:function(){this.state="ad-playback";r.el().className+=" vjs-ad-playing";h(r)},contentupdate:function(){if(r.paused()){this.state="content-set"}else{this.state="ads-ready?"}}}}};(function(e){var i=function(){};(n[e].events[t.type]||i).apply(r.ads);if(e!==r.ads.state){(n[e].leave||i).apply(r.ads);(n[r.ads.state].enter||i).apply(r.ads);if(d.debug){videojs.log("ads",e+" -> "+r.ads.state)}}})(r.ads.state)};s(r,n.Html5.Events.concat(["adtimeout","contentupdate","adsready","adscanceled","adstart","adend"]),v);r.ads.contentSrc=r.currentSrc();(function(){var e=function(){var e;if(r.ads.state!=="ad-playback"){e=r.currentSrc();if(e!==r.ads.contentSrc){r.trigger({type:"contentupdate",oldValue:r.ads.contentSrc,newValue:e});r.ads.contentSrc=e}}};r.on("loadstart",e);o(e)})();if(!r.paused()){v({type:"play"})}};n.plugin("ads",d)})(window,document,videojs);(function(e){"use strict";var t=function(e){var t;var n;var r;for(n=1;n<arguments.length;n++){t=arguments[n];for(r in t){if(t.hasOwnProperty(r)){e[r]=t[r]}}}return e},n={},r=function(e,r){var i=this;i.ima.createAdContainer_=function(){u=i.getChild("controlBar");a=u.el().parentNode.insertBefore(document.createElement("div"),u.el());a.id="ima-ad-container";a.style.display="none";a.style.width=i.width()+"px";a.style.height=i.height()+"px";a.addEventListener("mouseover",i.ima.showAdControls_,false);a.addEventListener("mouseout",i.ima.hideAdControls_,false);i.ima.createControls_();m=new google.ima.AdDisplayContainer(a,o)};i.ima.createControls_=function(){f=document.createElement("div");f.id="ima-controls-div";f.style.width="100%";l=document.createElement("div");l.id="ima-countdown-div";l.innerHTML="Advertisement";c=document.createElement("div");c.id="ima-seek-bar-div";c.style.width=i.width()+"px";h=document.createElement("div");h.id="ima-progress-div";p=document.createElement("div");p.id="ima-play-pause-div";p.className="ima-playing";p.addEventListener("click",i.ima.onAdPlayPauseClick_,false);d=document.createElement("div");d.id="ima-mute-div";d.className="ima-non-muted";d.addEventListener("click",i.ima.onAdMuteClick_,false);v=document.createElement("div");v.id="ima-fullscreen-div";v.className="ima-non-fullscreen";v.addEventListener("click",i.ima.onAdFullscreenClick_,false);a.insertBefore(f,a.childNodes[a.childNodes.length]);f.insertBefore(l,f.childNodes[f.childNodes.length]);f.insertBefore(c,f.childNodes[f.childNodes.length]);f.insertBefore(p,f.childNodes[f.childNodes.length]);f.insertBefore(d,f.childNodes[f.childNodes.length]);f.insertBefore(v,f.childNodes[f.childNodes.length]);c.insertBefore(h,c.childNodes[f.childNodes.length])};i.ima.initializeAdDisplayContainer=function(){g=true;m.initialize()};i.ima.requestAds=function(){if(!g){m.initialize()}var e=new google.ima.AdsRequest;e.adTagUrl=s.adTagUrl;e.linearAdSlotWidth=i.width();e.linearAdSlotHeight=i.height();e.nonLinearAdSlotWidth=s.nonLinearWidth||i.width();e.nonLinearAdSlotHeight=s.nonLinearHeight||i.height()/3;y.requestAds(e)};i.ima.onAdsManagerLoaded_=function(e){b=e.getAdsManager(M,w);b.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,i.ima.onAdError_);b.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,i.ima.onContentPauseRequested_);b.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,i.ima.onContentResumeRequested_);b.addEventListener(google.ima.AdEvent.Type.LOADED,i.ima.onAdLoaded_);b.addEventListener(google.ima.AdEvent.Type.STARTED,i.ima.onAdStarted_);b.addEventListener(google.ima.AdEvent.Type.CLICK,i.ima.onAdPlayPauseClick_);b.addEventListener(google.ima.AdEvent.Type.COMPLETE,i.ima.onAdComplete_);i.trigger("adsready")};i.ima.start=function(){try{b.init(i.width(),i.height(),google.ima.ViewMode.NORMAL);b.setVolume(i.muted()?0:i.volume());b.start()}catch(e){i.ima.onAdError_(e)}};i.ima.onAdsLoaderError_=function(e){window.console.log("AdsLoader error: "+e.getError());if(b){b.destroy()}i.play()};i.ima.onAdError_=function(e){window.console.log("Ad error: "+e.getError());b.destroy();a.style.display="none";i.play()};i.ima.onContentPauseRequested_=function(e){N=true;C=true;i.off("ended",P);if(e.getAd().getAdPodInfo().getPodIndex()!=-1){i.ads.startLinearAdMode()}a.style.display="block";u.hide();i.pause()};i.ima.onContentResumeRequested_=function(e){N=false;C=false;i.on("ended",P);a.style.display="none";u.show();if(!S){i.ads.endLinearAdMode()}else if(!L&&S.getAdPodInfo().getPodIndex()!=-1){i.ads.endLinearAdMode()}l.innerHTML=""};i.ima.onAdLoaded_=function(e){if(!e.getAd().isLinear()){i.play()}};i.ima.onAdStarted_=function(e){S=e.getAd();if(S.isLinear()){T=setInterval(i.ima.onAdPlayheadTrackerInterval_,250)}};i.ima.onAdComplete_=function(e){if(S.isLinear()){clearInterval(T)}};i.ima.onAdPlayheadTrackerInterval_=function(){var e=b.getRemainingTime();var t=S.getDuration();var n=t-e;n=n>0?n:0;var r=false;var i,s;if(S.getAdPodInfo()){r=true;i=S.getAdPodInfo().getAdPosition();s=S.getAdPodInfo().getTotalAds()}var o=Math.floor(e/60);var u=Math.floor(e%60);if(u.toString().length<2){u="0"+u}var a=": ";if(r){a=" ("+i+" of "+s+"): "}l.innerHTML="Advertisement"+a+o+":"+u;var f=n/t;var c=f*100;h.style.width=c+"%"};i.ima.hideAdControls_=function(){p.style.display="none";d.style.display="none";v.style.display="none";f.style.height="14px"};i.ima.showAdControls_=function(){f.style.height="37px";p.style.display="block";d.style.display="block";v.style.display="block"};i.ima.onAdPlayPauseClick_=function(){if(C){p.className="ima-paused";b.pause();C=false}else{p.className="ima-playing";b.resume();C=true}};i.ima.onAdMuteClick_=function(){if(k){d.className="ima-non-muted";b.setVolume(1);i.muted(false);k=false}else{d.className="ima-muted";b.setVolume(0);i.muted(true);k=true}};i.ima.onAdFullscreenClick_=function(){if(i.isFullscreen()){i.cancelFullscreen()}else{i.requestFullscreen()}};i.ima.onFullscreenChange_=function(){if(i.isFullscreen()){v.className="ima-fullscreen";a.style.width=window.screen.width+"px";a.style.height=window.screen.height+"px";b.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN)}else{v.className="ima-non-fullscreen";a.style.width=i.width()+"px";a.style.height=i.height()+"px";b.resize(i.width(),i.height(),google.ima.ViewMode.NORMAL)}};i.ima.onVolumeChange_=function(){var e=i.muted()?0:i.volume();if(b){b.setVolume(e)}};i.ima.seekContentToZero_=function(){i.off("loadedmetadata",i.ima.seekContentToZero_);i.currentTime(0)};i.ima.playContentFromZero_=function(){i.off("loadedmetadata",i.ima.playContentFromZero_);i.currentTime(0);i.play()};i.ima.resetIMA_=function(){if(b){b.destroy();b=null}if(y&&!L){y.contentComplete()}L=false};i.ima.addEventListener=function(e,t){if(b){b.addEventListener(e,t)}};i.ima.getAdsManager=function(){return b};i.ima.setContent=function(e,t,n){i.ima.resetIMA_();s.adTagUrl=t?t:s.adTagUrl;i.pause();i.src(e);if(n){i.on("loadedmetadata",function(){i.ima.playContentFromZero_()})}else{i.on("loadedmetadata",function(){i.ima.seekContentToZero_()})}};i.ima.addContentEndedListener=function(e){D.push(e)};i.ima.pauseAd=function(){if(N&&C){p.className="ima-paused";b.pause();C=false}};i.ima.resumeAd=function(){if(N&&!C){p.className="ima-playing";b.resume();C=true}};i.ima.updateCurrentTime=function(){if(!M.seeking){M.currentTime=i.currentTime()}};i.ima.checkForSeeking=function(){var e=i.currentTime();var t=(e-M.previousTime)*1e3;if(Math.abs(t)>A+O){M.seeking=true}else{M.seeking=false}M.previousTime=i.currentTime()};var s;var o;var u;var a;var f;var l;var c;var h;var p;var d;var v;var m;var g=false;var y;var b;var w=null;var E;var S;var x;var T;var N=false;var C=false;var k=false;var L=false;var A=1e3;var O=100;var M={currentTime:0,previousTime:0,seeking:false,duration:0};var _={currentTime:0,duration:0,isPod:false,adPosition:0,totalAds:0};var D=[];var P=function(){if(y&&!L){y.contentComplete();L=true}for(var e in D){D[e]()}};s=t({},n,e||{});if(!s["id"]){window.console.log("Error: must provide id of video.js div");return}o=document.getElementById(s["id"]+"_html5_api");setInterval(i.ima.updateCurrentTime,A);setInterval(i.ima.checkForSeeking,A);i.on("ended",P);i.ads({debug:s.debug});w=new google.ima.AdsRenderingSettings;w.restoreCustomPlaybackStateOnAdBreakComplete=true;if(s["adsRenderingSettings"]){for(var H in s["adsRenderingSettings"]){w[H]=s["adsRenderingSettings"][H]}}if(s["locale"]){google.ima.settings.setLocale(s["locale"])}i.ima.createAdContainer_();y=new google.ima.AdsLoader(m);y.getSettings().setVpaidAllowed(true);if(s.vpaidAllowed==false){y.getSettings().setVpaidAllowed(false)}if(s.locale){y.getSettings().setLocale(s.locale)}y.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,i.ima.onAdsManagerLoaded_,false);y.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,i.ima.onAdsLoaderError_,false);if(!r){r=i.ima.start}i.on("readyforpreroll",r);i.on("fullscreenchange",i.ima.onFullscreenChange_);i.on("volumechange",i.ima.onVolumeChange_)};e.plugin("ima",r)})(window.videojs)