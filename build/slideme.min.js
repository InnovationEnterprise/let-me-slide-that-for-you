var slideMe=slideMe||{},getHead=document.getElementsByTagName("head")[0],isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i);slideMe.timeList=[],slideMe.currentArrayNr="00",slideMe.imagesReady=!1,slideMe.contentReady=!1,slideMe.errorThat=function(e,i){var t="Player error:<br>"+e;i.setAttribute("class","slideme-error"),i.innerHTML=t,slideMe=null},slideMe.addAttributes=function(e,i){for(var t in i)i.hasOwnProperty(t)&&e.setAttribute(t,i[t])},slideMe.destroy=function(){slideMe.thisPlayer.dispose(),slideMe.slideMeContainer.remove(),slideMe=void 0},slideMe.throttle=function(e,i,t){var d,s;return function(){var l=t||this,a=+new Date,n=arguments;d&&d+i>a?(clearTimeout(s),s=setTimeout(function(){d=a,e.apply(l,n)},i)):(d=a,e.apply(l,n))}},slideMe.loadAssets=function(e,i,t){var d,s=document.getElementsByTagName("body")[0];"css"===i?(d=document.createElement("link"),d.href=e,d.rel="stylesheet",d.type="text/css"):(d=document.createElement("script"),d.src=e,d.async=!0,d.type="text/javascript"),s.appendChild(d),void 0!==t&&(d.onload=function(){t()})},slideMe.createDOM=function(){var e=document.createElement("div");if(e.setAttribute("id","slideme-wrapper"),void 0!==slideMe.data.videosourcesmobile||void 0!==slideMe.data.videosources){slideMe.thisVideoPlayer=document.createElement("video"),slideMe.addAttributes(slideMe.thisVideoPlayer,{id:"videojs",controls:""});var i;i=null!==isMobile?slideMe.data.videosourcesmobile:slideMe.data.videosources,slideMe.slideMeContainer.appendChild(slideMe.thisVideoPlayer);for(var t in i)if(i.hasOwnProperty(t)){var d=document.createElement("source");slideMe.addAttributes(d,{src:i[t],type:t}),slideMe.thisVideoPlayer.appendChild(d)}if(void 0!==slideMe.data.subtitles)for(var s=0;s<slideMe.data.subtitles.length;s++){var l=document.createElement("track");slideMe.addAttributes(l,{src:slideMe.data.subtitles[s].src,srclang:slideMe.data.subtitles[s].srclang,label:slideMe.data.subtitles[s].label}),"true"===slideMe.data.subtitles[s]["default"]&&l.setAttribute("default",""),slideMe.thisVideoPlayer.appendChild(l)}slideMe.fireVideJs()}},slideMe.loadJson=function(e){var i=new XMLHttpRequest;i.open("GET",e,!0),i.onload=function(){i.status>=200&&i.status<400?(slideMe.data=JSON.parse(i.responseText),(void 0!==slideMe.data.videosourcesmobile||void 0!==slideMe.data.videosources)&&slideMe.loadAssets("//vjs.zencdn.net/4.12/video.js","script",function(){slideMe.createDOM()}),void 0!==slideMe.data.videoslides&&slideMe.getSlides(),console.log("json fetched")):slideMe.errorThat("cannot connect",slideMe.slideMeContainer);var e=setInterval(function(){void 0!==slideMe.data.videosourcesmobile||void 0!==slideMe.data.videosources?void 0!==slideMe.thisPlayer&&slideMe.contentReady===!0&&(slideMe.preloaderWrapper.remove(),clearInterval(e)):slideMe.contentReady===!0&&(slideMe.preloaderWrapper.remove(),clearInterval(e))},50)},i.onerror=function(){slideMe.errorThat("cannot connect",slideMe.slideMeContainer)},i.send()},slideMe.reload=function(e){for(videojs.dispose();slideMe.slideMeContainer.firstChild;)slideMe.slideMeContainer.removeChild(slideMe.slideMeContainer.firstChild);addPreloader(),loadJson(e)};var insertSpiner=document.createElement("style");insertSpiner.innerHTML='[data-slidemejs] {font-family: Helvetica, Arial, sans-serif;position:relative;height:500px}#slideme-preloader{position:absolute;top:0;bottom:0;left:0;right:0;padding:15% 0 0;background:#fff;z-index:100;color:#000;text-align:center}#slideme-preloader:after{content:"Loading, please wait...";font-size:12px;font-weight:100;display:block}@keyframes slideMeSpinner{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}@-webkit-keyframes slideMeSpinner{from{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(360deg)}}.icon-spinner{-webkit-animation:slideMeSpinner .75s linear infinite;animation:slideMeSpinner 2s linear infinite;font-size:20px;line-height:50px;width:50px;height:50px;cursor:default;text-align:center;color:#000}',getHead.appendChild(insertSpiner),slideMe.addPreloader=function(){var e='<i class="icon-spinner">.</i>';slideMe.preloaderWrapper=document.createElement("div"),slideMe.preloaderWrapper.setAttribute("id","slideme-preloader"),slideMe.preloaderWrapper.innerHTML=e,slideMe.slideMeContainer.appendChild(slideMe.preloaderWrapper)},slideMe.playList=function(){function e(){return slideMe.reload(this.getAttribute("data-json")),!1}var i;null!==document.getElementById("slideme-playlist")?i=document.getElementById("slideme-playlist"):(i=document.createElement("div"),i.setAttribute("id","slideme-playlist")),i.innerHTML='<div id="slideme-playlist-title">Playlist<div id="slideme-playlist-drop">></div></div><div id="slideme-playlist-list"></div>',slideMe.slideMeContainer.appendChild(i),slideMe.slideMeContainer.style.margin="0 auto 50px auto";var t=document.getElementById("slideme-playlist-title"),d=document.getElementById("slideme-playlist-list");void 0!==data.playlist&&(playListData=data.playlist);for(var s=0;s<playListData.length;s++){var l;"json"===playListData[s].type?(l=document.createElement("p"),l.innerHTML=playListData[s].title,l.setAttribute("data-json",playListData[s].link),d.appendChild(l),l.addEventListener("click",e)):(l=document.createElement("a"),l.innerHTML=playListData[s].title,l.setAttribute("href",playListData[s].link),d.appendChild(l))}var a=!1;t.addEventListener("click",function(){a===!1?(a=!0,d.style.display="block",t.classList.add("slideme-drop-active")):(a=!1,d.style.display="none",t.classList.remove("slideme-drop-active"))})},slideMe.destroyPlaylist=function(){document.getElementById("slideme-playlist").remove()},slideMe.fireVideJs=function(){void 0===slideMe.data.preload&&(slideMe.data.preload="metadata"),void 0===slideMe.data.poster&&(slideMe.data.poster=""),slideMe.addAttributes(slideMe.thisVideoPlayer,{"class":"video-js vjs-default-skin",poster:slideMe.data.poster,preload:slideMe.data.preload}),slideMe.thisPlayer=videojs(slideMe.thisVideoPlayer);var e=slideMe.slideMeContainer.getAttribute("data-adtag");if(void 0!==slideMe.data.adTagUrl||e){var i;i=null===e?{id:"videojs",adTagUrl:slideMe.data.adTagUrl}:{id:"videojs",adTagUrl:e},slideMe.loadAssets("//d3gr29hczmiozh.cloudfront.net/slidemeads.css","css"),slideMe.loadAssets("//imasdk.googleapis.com/js/sdkloader/ima3.js","script",function(){slideMe.loadAssets("//d3gr29hczmiozh.cloudfront.net/slidemeads.js","script",function(){slideMe.thisPlayer.ima(i),slideMe.thisPlayer.ima.initializeAdDisplayContainer(),slideMe.thisPlayer.ima.requestAds(),console.log("ad script loaded")})})}slideMe.thisPlayer.ready(function(){slideMe.setSize(),window.onresize=slideMe.throttle(slideMe.setSize,200),document.addEventListener("orientationchange",function(){slideMe.setSize()}),console.log("player created"),"html"===slideMe.data.videoslidestype&&(slideMe.preloaderWrapper.remove(),slideMe.slideMeContainer.style.overflow="visible"),void 0===slideMe.data.videoslides?slideMe.preloaderWrapper.remove():document.getElementsByTagName("video")[0].addEventListener("timeupdate",slideMe.throttle(slideMe.setNewSlide,500)),void 0!==slideMe.data.autoplay&&"false"!==slideMe.data.autoplay&&slideMe.thisPlayer.play();var e=setInterval(function(){slideMe.contentReady===!0&&(slideMe.sliderClickEvent(slideMe.firstImage,!0),clearInterval(e))},100);slideMe.embed(),slideMe.slideMeContainer.parentNode.offsetWidth<=900&&slideMe.fullscreen(),null===document.getElementById("slideme-h1")&&(slidemeVjstitle=slideMe.thisPlayer.addChild("button"),slidemeVjstitle.addClass("slideme-vjs-title"),document.getElementsByClassName("slideme-vjs-title")[0].innerHTML=slideMe.data.title)})},slideMe.getSlides=function(){slideMe.presentationNode=document.createElement("div"),slideMe.presentationNode.setAttribute("id","slideme-container"),slideMe.slideMeContainer.appendChild(slideMe.presentationNode),slideMe.createImgContainer=document.createElement("div"),slideMe.createImgContainer.setAttribute("id","slideme-list");var e=document.createElement("div");if(e.setAttribute("id","slideme-list-wrapper"),slideMe.slideMeContainer.appendChild(e),"images"===slideMe.data.videoslidestype){var i='<div id="slideme-btn-prev"><i class="icon-prevslide"><</i></div><div id="slideme-btn-next"><i class="icon-nextslide">></i></div>';e.innerHTML=i,void 0!==slideMe.data.videosourcesmobile||void 0!==slideMe.data.videosources?slideMe.slideMeContainer.setAttribute("class","slideme-images"):slideMe.slideMeContainer.setAttribute("class","slideme-images-only"),slideMe.loadImages()}else{e.setAttribute("class","slideme-text");var t=document.createElement("div");t.setAttribute("id","slideme-html-nav"),t.innerHTML='<div id="slideme-html-nav-left"><</div><div id="slideme-html-nav-right">></div>',e.appendChild(t),slideMe.slideMeContainer.setAttribute("class","slideme-html")}e.appendChild(slideMe.createImgContainer)},slideMe.setNewSlide=function(){if(slideMe.imagesReady===!0){for(var e,i=Math.round(slideMe.thisPlayer.currentTime()),t=0;t<slideMe.timeList.length;t++)i>=slideMe.timeList[t]&&(e=slideMe.timeList[t]);if(slideMe.currentArrayNr!==e){slideMe.currentArrayNr=e;var d=document.querySelectorAll('[data-slideme-time="'+e+'"]')[0];"images"===slideMe.data.videoslidestype?(slideMe.createImgContainer.style.left=d!==d?150-d.offsetLeft+"px":50-d.offsetLeft+"px",slideMe.firstImage.setAttribute("src",d.getAttribute("src"))):slideMe.createImgContainer.style.top=-d.offsetTop+"px",document.getElementsByClassName("slideme-img-active")[0].classList.remove("slideme-img-active"),d.setAttribute("class","slideme-img-active")}}},slideMe.setSize=function(){var e=slideMe.slideMeContainer.parentNode.offsetWidth,i=slideMe.slideMeContainer.classList.contains("this-fixed");i&&(e=window.innerWidth);var t,d,s=e;if(void 0===slideMe.data.videosourcesmobile&&void 0===slideMe.data.videosources?t=480:(e/=2,t=e/1.78,s=e,d=t,e=1.33*t),void 0===slideMe.data.videoslides)d=s/1.78;else{var l=document.getElementById("ima-ad-container");null!==l&&(l.style.width=s+"px",l.style.height=d+"px",document.getElementById("ima-seek-bar-div").style.width=s+"px",l.getElementsByTagName("iframe")[0].style.width=s+"px",l.getElementsByTagName("iframe")[0].style.height=d+"px"),slideMe.presentationNode.style.width=e+"px",slideMe.presentationNode.style.height=t+"px",slideMe.slideMeContainer.style.height=d+75+"px"}slideMe.slideMeContainer.style.width=s+e+"px";var a=document.getElementById("slideme-h1");void 0===slideMe.data.videoslides&&slideMe.slideMeContainer.parentNode.offsetWidth>=900?(s=1.2*s,d=s/1.78,null!==a&&(a.style.maxWidth=s+"px")):null!==a&&(a.style.maxWidth=s+e+"px"),slideMe.slideMeContainer.parentNode.offsetWidth<=900?(i||(slideMe.presentationNode&&(slideMe.presentationNode.style.display="none",document.getElementById("slideme-list-wrapper").style.display="none"),s=slideMe.slideMeContainer.offsetWidth,d=s/1.78),slideMe.slideMeContainer.style.height=d+"px"):slideMe.presentationNode&&(slideMe.presentationNode.style.display="block",document.getElementById("slideme-list-wrapper").style.display="block",document.getElementById("slideme-list-wrapper").style.bottom="0px"),void 0===slideMe.data.videoslides&&(slideMe.slideMeContainer.style.height=d+"px"),slideMe.thisPlayer.dimensions(s,d)},slideMe.loadImages=function(){for(var e=0,i=slideMe.data.videoslides.length,t=0;i>t;t++)!function(){var d=slideMe.data.videoslides[t].slidecontent,s=new Image;s.src=d,s.onload=function(){e+=1,e===i&&slideMe.setContent(!0)},s.onerror=function(){errorThat("cannot load image",slideMe.slideMeContainer)}}()},slideMe.sliderClickEvent=function(e,i){function t(){if(i===!0){var t=slideMe.thisPlayer.duration();if(slideMe.data.videosourcesmobile&&t>10||slideMe.data.videosources&&t>10){var d=this.getAttribute("data-slideme-time");slideMe.thisPlayer.currentTime(d),slideMe.thisPlayer.play()}}"images"===slideMe.data.videoslidestype&&this!==slideMe.addClicks[0]&&(slideMe.createImgContainer.style.left=150-this.offsetLeft+"px"),"images"===slideMe.data.videoslidestype&&e.setAttribute("src",this.getAttribute("src")),document.getElementsByClassName("slideme-img-active")[0].classList.remove("slideme-img-active"),this.setAttribute("class","slideme-img-active")}slideMe.addClicks=document.querySelectorAll("[data-slideme-time]"),slideMe.addClicks[0].setAttribute("class","slideme-img-active");for(var d=0;d<slideMe.addClicks.length;d++)slideMe.addClicks[d].addEventListener("click",t,!1);var s=!1,l=100*slideMe.data.videoslides.length;document.getElementById("slideme-btn-next").addEventListener("click",function(){var e=slideMe.createImgContainer.offsetLeft;s===!1&&e>-l+500&&(s=!0,slideMe.createImgContainer.style.left=e-200+"px",setTimeout(function(){s=!1},325))},!1),document.getElementById("slideme-btn-prev").addEventListener("click",function(){var e=slideMe.createImgContainer.offsetLeft;if(s===!1&&50>e){s=!0;var i;i=-50>e?200:100,slideMe.createImgContainer.style.left=e+i+"px",setTimeout(function(){s=!1},325)}},!1)},slideMe.embed=function(){var e=document.createElement("div");e.setAttribute("id","slideme-share");var i=document.querySelectorAll("[data-slidemejs]")[0].getAttribute("data-slidemejs"),t=document.createTextNode('<div data-slidemejs="'+i+'"></div> <script src="//d3gr29hczmiozh.cloudfront.net/slideme.min.js" async></script>');e.innerHTML='<div id="slideme-embed-close">x</div><div id="slideme-title">Embed<p>Copy and paste the code below into your website</p></div><textarea id="slideme-code"></textarea>',slideMe.slideMeContainer.appendChild(e),document.getElementById("slideme-code").appendChild(t),document.getElementById("slideme-embed-close").addEventListener("click",function(){e.style.display="none"}),button=slideMe.thisPlayer.addChild("button",{text:"Embed"}),button.addClass("slideme-emebed-btn"),button.on("click",function(){e.style.display="block"})},slideMe.setContent=function(e){for(var i=slideMe.data.videoslides,t=0,d=0;d<i.length;d++){var s=i[d].slidecontent;""===i[d].timemin&&(i[d].timesec="0"),""===i[d].timesec&&(i[d].timesec="0");var l,a=60*i[d].timemin+parseInt(i[d].timesec);e?(l=document.createElement("img"),slideMe.addAttributes(l,{src:s,"data-slideme-time":a}),imgContainerWidth=100*i.length,slideMe.createImgContainer.style.width=imgContainerWidth+"px"):(l=document.createElement("div"),l.innerHTML='<div class="slideme-list-content">'+s+"</div>",l.setAttribute("data-slideme-time",a)),slideMe.timeList.push(a),slideMe.createImgContainer.appendChild(l),t+=1,t===i.length&&(slideMe.imagesReady=!0)}if(e){var n=i[0].slidecontent;slideMe.firstImage=document.createElement("img"),slideMe.firstImage.setAttribute("src",n),slideMe.presentationNode.appendChild(slideMe.firstImage),slideMe.slideMeContainer.style.overflow="visible"}if(console.log("slider content set"),"html"===slideMe.data.videoslidestype){var r=!0;document.getElementById("slideme-html-nav-left").addEventListener("click",function(){var e=slideMe.createImgContainer.offsetTop;0>e&&r===!0&&(slideMe.createImgContainer.style.top=slideMe.createImgContainer.offsetTop+360+"px",r=!1,setTimeout(function(){r=!0},350))}),document.getElementById("slideme-html-nav-right").addEventListener("click",function(){var e=slideMe.createImgContainer.offsetTop,i=slideMe.createImgContainer.offsetHeight;e>-i+360&&r===!0&&(slideMe.createImgContainer.style.top=slideMe.createImgContainer.offsetTop-360+"px",r=!1,setTimeout(function(){r=!0},350))})}slideMe.data.videosourcesmobile||slideMe.data.videosources?slideMe.contentReady=!0:(slideMe.sliderClickEvent(slideMe.firstImage,!1),slideMe.contentReady=!0)},slideMe.fullscreen=function(){slidemefullscreen=slideMe.thisPlayer.controlBar.addChild("button",{text:"Full screen"}),slidemefullscreen.addClass("slideme-fullscreen-btn");var e=!1;slidemefullscreen.on("click",function(){if(e===!1){e=!0,slideMe.slideMeContainer.classList.add("this-fixed"),slideMe.slideMeContainer.classList.add("full-mobile");var i=document.createElement("div");i.setAttribute("id","slideme-fullscreen"),i.innerHTML='<div id="slideme-close-popup">x</div>',slideMe.slideMeContainer.appendChild(i),slideMe.presentationNode.style.display="block",document.getElementById("slideme-list-wrapper").style.display="block",slideMe.presentationNode.style.height=parseFloat(slideMe.slideMeContainer.style.height)+"px",document.getElementById("slideme-list-wrapper").style.bottom="-75px";var t=function(){i.remove(),slideMe.slideMeContainer.classList.remove("this-fixed"),slideMe.slideMeContainer.classList.remove("full-mobile"),document.getElementById("slideme-list-wrapper").style.display=slideMe.slideMeContainer.parentNode.offsetWidth<=900?"none":"block",slideMe.slideMeContainer.style.marginTop="0px",slideMe.slideMeContainer.style.marginLeft="auto",e=!1};slideMe.presentationNode&&(slideMe.presentationNode.style.display="block",document.getElementById("slideme-list-wrapper").style.display="block"),document.getElementById("slideme-close-popup").addEventListener("click",t,!1),document.getElementById("slideme-fullscreen").addEventListener("click",t,!1)}})},document.addEventListener("DOMContentLoaded",function(){slideMe.slideMeContainer=document.querySelectorAll("[data-slidemejs]")[0],slideMe.addPreloader(),slideMe.loadAssets("//d3gr29hczmiozh.cloudfront.net/slidemecss.min.css","css",function(){void 0!==slideMe.slideMeContainer&&""!==slideMe.slideMeContainer.getAttribute("data-slidemejs")&&"false"!==slideMe.slideMeContainer.getAttribute("data-autoconfig")&&slideMe.loadJson(slideMe.slideMeContainer.getAttribute("data-slidemejs"))})});